using Shouldly;
using System;
using System.Linq;
using System.Threading.Tasks;
using Resume.CompanyMains;
using Resume.EntityFrameworkCore;
using Xunit;

namespace Resume.CompanyMains
{
    public class CompanyMainRepositoryTests : ResumeEntityFrameworkCoreTestBase
    {
        private readonly ICompanyMainRepository _companyMainRepository;

        public CompanyMainRepositoryTests()
        {
            _companyMainRepository = GetRequiredService<ICompanyMainRepository>();
        }

        [Fact]
        public async Task GetListAsync()
        {
            // Arrange
            await WithUnitOfWorkAsync(async () =>
            {
                // Act
                var result = await _companyMainRepository.GetListAsync(
                    name: "25f48a5795fe48c7a0f4a41b4eaf1c4072456e5ef2664778b9",
                    compilation: "51ba9cdf3c3847ca909c31fdd7cdfb16e72b0f3c3d1241279f",
                    officePhone: "5061e766a76b4899a1572d9a9a65232e5aa4f6e8cf86414f99",
                    faxPhone: "e2ded3d85dab4201b92a2625cea4425440e2804cb5f744f680",
                    address: "4631b332516141fab0f4b3805e6a3e0183d1af7c18fb4d11bc",
                    principal: "15fb12e2188540899da459a373981ff850a020204e4242dbaf",
                    allowSearch: true,
                    extendedInformation: "5d0daba2e22a4f889b985eca6bd95d4a220cd316d8a7471f839773fd50014a673686f3a8f75e4835a6727bf3b96ca08124ffcd21d1be49599099eee67d11eedc8eb33ee4d9554063b0af10a39621d94703607709b0f74c9da6ee99c730beba8ec6778ae4ebd14dbfb7a38be626dfc965dfff2cef742245f09540a3e1dc4b450e4c2023412eeb4a5686b187815a7193a7738c6fea630b4627ba54fb0f972fded650f691f13450419ca4baedb11702dc97fda4b2801e2d46d59bbde2a24198cfb357eed475a0fc468a9f701b498bee7c9d3108b225bbaa48c6b6da821fda5c2b4861e9ba49ee49492ba5e6e8261621633976174608fa5248ceafef",
                    note: "8c14572587b14a39a1c22d594732b5b20181591803b34f04b2c6329ce6cef546cfa99570fd554c229eeb5f57b21299998bc6f15a4fa8414481a3aa0ea685c31d9fa9d05a4ea24d728c91afebd892f34b979438ec6f394d6ca94e1802ca6880cd88f62b2d19144acf87c0a1560b79ed096e98ee214d0a4bf59b5e23c9a47aa8e87a4610d19a054a39a5d91b429e1028649ad709e631a34d4b9731b718725286abb1a5732545f041399678aa4d0e31f01dc283dd341e6f4438a0bba529c8afdb078b0eec659c504e2bae890f95011c3ea2b0a4cddaffb54e30999c5f947ba7f69617c9d83ec51144e494575cb5ebe0f896bafddebeb3194e3a835d",
                    status: "a206c399a2b449ef86aa8ffec3d31ede1b4235b8e1e94cf38f",
                    industryCategory: "870b355d04124126a5ab35b52c8494d523ff26fce46a4cc1a8336119775215e8b7c1a98441ad424ca5cee6c86c035eac746f0e8a6e3848918e44c40e0e409354fcae93ac3c9b46f796f7da25547d8742992a21bbc59c42749b82c81ac1146bfdee27060a354e4757a3def879cf057272d8346a1014f14186ada9d7c2037054222be756fe14fe4f5ba1fd006e32faafa141e4a0d1d0b548adbf6a7acfe3208a109eaa261e735c4d169ae5d3e3ccacc645026fcacfc342420c86b2ff0ead55206df29a1e3b0f1a4d1caee1799c6ee3dcf358c36a00645b4b9c9496454c613b50ddbeeb40000b2446d393d6b0b12ffc6417b58c968e60a74c699024",
                    companyUrl: "54f02f90aea245c398a26831da91e0d233009b12e5c04481b8515bee33e10e929183d321b6aa4f9197e906ccb05336204523a3ab3e604d8286c3eb1a993e534cc9f8b8a50c1d42459dcecf7537bbb2924d0828790de444e6b559716dea44c5dafa90b260",
                    hideCapitalAmount: true,
                    companyScaleCode: "e75fba5b43784f48bb22e618808f5ecab97d83baef524715b3",
                    hidePrincipal: true,
                    companyUserId: Guid.Parse("6a203479-f3e0-4665-9e55-a681964b83f8"),
                    companyProfile: "f0796fbe19f64761b010d99ef19520c6931f7fe2ed994e2397805e64f8a010b3435bb6b89aff4d7a9feaabcc36c04a806ff381983bd6489aa72e6f182c07ccd809682c0a9ca74e1f8c9fd490adac686e550c46b543604f8aa8068da8d6cb77d98b41f11aa8104d458791bde72ae5b85c8d12490616f04b69adfcd53b426ce89d5e958afd8e604fba81f404813811278f2125936f3ba340448f5f6c8a1e22097b4ef3e3c399a54761aa056a91b829cc207e57dadc967e41f2aa4903ccf881f3ce74d40ff601fe4b33a1137c2c49438b26f43acbea23834bdab8282b0bf2b2090d6e177534ae1a488ca16888356a922a8203565e6e71854d4d8eab",
                    businessPhilosophy: "fb42b15b7da94ef68bce6238ff43b43c1f1d22e046b04e25895ef5cec21f25553004c74010c94b32a9c25f9463b922a2e679f5a748b04bc285dd053861c8f2a7a4916a181f9a475abfd44c2af31c7c57ebce06d038b84a3994f8e495685334e5bfadfb909c0a46bda6b5686a1d503cb547ffd4a430e046f788032d93672ff559ad373d2d7bb743cc847f573f29eb62790372eccf6bd4471cac7763d56e3cd9cd76fb5bc82f1744d5a49283370e99a98e07d66edafeec48c3a7e6a656c2d34d00a7228f030d74429bb9b80f2f4b7fe3548775da588ef84968b698509703c19679469b31a5641d49e6915f1b606c9e1b2777e77d1c5c7e465d9dc9",
                    operatingItems: "4fc423ee038d4d5098830354292e3781928be61550864671aa66d58190da24275b2481651547466884421bf2101023764ba4817e1fb040999fb7456b4d2456e6f8d81480dce94d78a1187cf5b932b4a2f7964cabcb5a45b3a2ba75d1e74939a082f3a801b44843069572e86583851d2e5ee2b3546dd74fcc8196826bc3e07f547d312bfced124356a569f0c94f4fb469c2d2bf71369b434ca82e34d2d72ef98f71ccb8901061499ea36f5802817d7fee7012b02d9c2246d2bbe2c56ec1b1f589377377ad19df45b8a96afad06f64910218010e62306843a8a743670159f9b13ba14b4fb8557a48c49273091812b298c13fdbebec09d9427ebf86",
                    welfareSystem: "9524cb12d37946f28338014adc6effe4d9a65fc250f04004aec7e22d70ad9d01f2758d6ca9084f75a65b3749ac76a7fe2b53bdf6735545f68f58f597d25c8289cc0b81d73be945ef8e61ddab2eacab58e1ab080254584706acc13175f64649ad6b4e679a571e4bf2b59bbe02842b0a76a304987189464206af4b36fbc9344a46dd85bfc3a5de410e8f3c04abd48e891828f150ff69dd4c87a9135051c25759a394d6a651834346bdb02cb67bb02521e8360984d3879f4b83ad2b55fb96c662796882c06c380b43a7b1a722bcd4e4c1e9dcea478d49cd478492feb9a60c505c64c63e1475f6754f868468c6d29cf0548d5a7f5ba445104b3db106",
                    matching: true,
                    contractPass: true
                );

                // Assert
                result.Count.ShouldBe(1);
                result.FirstOrDefault().ShouldNotBe(null);
                result.First().Id.ShouldBe(Guid.Parse("2221319d-c4fb-4a17-a2cd-f77b446cef1f"));
            });
        }

        [Fact]
        public async Task GetCountAsync()
        {
            // Arrange
            await WithUnitOfWorkAsync(async () =>
            {
                // Act
                var result = await _companyMainRepository.GetCountAsync(
                    name: "d76b2f0882a146a7898cc7498d323b9f7a750ab6073f4961be",
                    compilation: "60334c9b15aa4dc198a0b1bdabeef268b8403568519742bca3",
                    officePhone: "4d99ae22edd5433fa235abbaf6ff6cca313b75f29fc9448ab7",
                    faxPhone: "c042529c12554702b1d60285db8d68b9e2ba6f79d1bc41ec93",
                    address: "c441b7b20702488a8fea0c7497734f4c1417cfe307fe42768d",
                    principal: "c3d85b96f40a455099aaba9ddcd993caa8e87011f1974e1c81",
                    allowSearch: true,
                    extendedInformation: "d7216cd687a34394828ca8b3db9e76e8e67d398b9e4e436f9d326e5e544634e1bedc22550f5342bc896a862a8cab8e6713789032e7114412b81af0c09c79e51841b6ec930bd24448b86386aaea0083eb53d7fe36e03540a4bfa247f0c099e36360c1babd53734f9e9ac1322864ef6c2946ebb18afd264e9385ffbab7db5a498504f05f6d8bbb492d8a6877ce207d61c1a04f406475d04b45bd5eeeaabd07f9ab816959b936074ed49c871e4d60539d164337024ba61f42e983a66542461e014aae27d75b7b5c4a16b4beda7499bbc081bc0097a449b34ae491aa9c28e7868bdc8341a440b3974551adec013af2440573c0d38467901a4f10adb8",
                    note: "4d001dcd0e244ee7802be4df7c547e1df783b7c8f98348139e7cc3208a81757ab06929a73e414e068fbf44fa4e5cfd5c0b54a6c6bfae4114b0e778454419d8068bc386e29d854896944a0a5f3cb7cd4b28722b91b29e4be598ec7906e941c6f6866e9b88881547d2ac4534cb5cdecd9a33c4cda06579440586b28fc4ca07169d275bb0ab1f0f4c90a1710574e22b9e6f807b72f0135249dab3817a4be70f788a2f904e675fea4c11a3d71ab97867ec10374add2d0128488f9417bb2ec6c3dd473ba6799312c84b5f88b8932bba5f02c8748123e5a3b24380bc067c80b6967611ecabbe77c0b34afea3f981b91bb0a0cff65cf04e5ed34571a7d3",
                    status: "d6e1b67078db43498882bbeca5cea572aef70891beeb42a880",
                    industryCategory: "bd80497994064a6db242d38c42ab5bbdce4bd8f2fc36405b872066acbc61617bcf80989f5de7474aaacb93e3d9b3b8fb545745ffcd254d0fa554c98ce865321e7e5ef67ac52844168919c72f2796412ddfe5b2230eaf46e4bd213e88d1aa00b37273fcbf875944f4b9285f210106751ff1197cc39999496b8bdfbca9b3663eb261657111430d4d56b852ab538e4130742e1d79ac2bcd41908fb068ddd6c1a7a4bf238c5d5c974e0d9fcb1f4a03b426b1d62681999f35416299b040e070b337bd519cae14afb9414695852b5fede233765281c75053bd40bf94ab396d6c95ff84ec42c3650a3148bbab110415301307b2eda84d67a10e4df0ae12",
                    companyUrl: "f896da3f4c75427bbd34a7ec6b48c993306d824120ac4098a6d145e83a25df07526aaeefce2c4a8da221ba898730e2879e2ac4eaf94143eb97981405213e1918e852d24fda15472a892024a6059e5c50167ae727cb5542c1bd2da1fba29a494ca2e98088",
                    hideCapitalAmount: true,
                    companyScaleCode: "1ea555401ac4474faed19444fdd44fa45e8921fcbdf14f8e83",
                    hidePrincipal: true,
                    companyUserId: Guid.Parse("2bbdc947-7437-4a46-a7c0-2969fed82ccd"),
                    companyProfile: "941b3d2ba715497f89906e2c4738f0133108da9a08104e4abb2d19219c3d0ace0f286059baf345ffae4849f7b50d896f4538b569db8843ab876f6d99a613d0ee07ca3960660d4e0c8b253f1c3c328532e01b7485df4c4ff9bc1ee5cb5d69fb3c238acbc210c34639a64f3849e75b763f569b63fba0314a9ba62b67762f454164efe57053007a494884ffb1ef7c3747921aea81caf32e4a4aa0e9047bd35f7c76dfe9e445cd2c44a9a491c8223e7b8a8a092fd121f6f747beab30ce2318ca95723b8dd89d7b2a4e78a259e5dbaa4f6d4c2a4645a51ba646d2a82c986cdd3f5eb19602226a7d9345549e7f312791caedd29c45f6c96d1e42e2850f",
                    businessPhilosophy: "ae183a0557134cd5ba4cecf806f2315402ec1280069744058e3c3924e510d48f422d10ffcee54ddfbca98f5d581dab770ef3b0160d574952992e5d7bc855c3f26b8525db86384ef18c17c37d5051c294ea05a484df6244d0a01e916eee4eb73565eb67bab35a4539880d2ddc6f19a8bb1aefe44ba2664eb6bff3c589e8a54edf4633397fe39c479c8d840de3e61fac4e67e5f6af84c6444794896cad1bd594c0070ffa44b1f040d189818d10468454cfdfe880715e93422884d84c585dca7c50c8d1d0342d044638ad87737008e9a28cda222f259ce14297b436e18d05cc5482f117218a14bb4573a1b88f5a32639795154b4913578941cd8065",
                    operatingItems: "022e3d8016874051a2335b6aee36a05b18b2c330e51d4272b96526c0429eed045783a5c1916a40219ec75a3a4281b431d1de767217fc48be917118aff94a4d7ca16b9adfda9a46dd9517261ed2e16cd564c68f6d979a437dba556cb5eb787cab8d385d1bd0224b2a9c98f1167c995d67865a1afa93eb4f00982fd8d46a5fe3a0872b40581e364cdeafaef9eaaa8024c7a5da6d90825d40869d2aa489047bb99ca77c3fc6f27a4e048113e13cdb6243705402328feed443388105e68f5e70e2b1108f1d12fc284c15b736c4b3a45d79a6af8b875120f14c079304ebe70f73a76c8082eac7bf984444970748569dc8622c729c8b2424514efe8c86",
                    welfareSystem: "5b7368f48d604d56b84e9ab3ec2ff19fdf0ee25a0680490da5b999e9e1b8c94d188d732ad228462a9a4e7fc83392431da368256d9c584d2abbb3f5bd871395dc7aefd1eb08454337824b3ed008745e5664ca1236575a4270bd9d61818735c4bd2bbdd59a06df49b99973f748be7578a8515522e58f294c67850b0e1a005d6eb661a96059f352494985edda5bd8884e1dc761c7b4d7764e889d98a42367b1e0e7c1908037565f4c8cba9b1932448cd04ca861d2327da64921bcb71b8d258860e417998254404a419f9f796503fc17369fe93209be118f4db8937481abf66ed7e9f37fce23321e412aa08a8a33f4ff2b884ae72c07b29a4abaabf7",
                    matching: true,
                    contractPass: true
                );

                // Assert
                result.ShouldBe(1);
            });
        }
    }
}